<!DOCTYPE html>
<html>
  <head>
    <title>WebSocket Test</title>
  </head>
  <body>
    <h1>WebSocket Connection Test</h1>
    <button id="connect">Connect to WebSocket</button>
    <button id="disconnect">Disconnect</button>
    <div id="log"></div>

    <script>
      let ws = null;
      const log = document.getElementById("log");

      function addLog(message) {
        const div = document.createElement("div");
        div.textContent = new Date().toLocaleTimeString() + ": " + message;
        log.appendChild(div);
        console.log(message);
      }

      document.getElementById("connect").onclick = function () {
        if (ws) {
          addLog("Already connected");
          return;
        }

        addLog("Attempting to connect to ws://localhost:3001/hume-proxy");
        ws = new WebSocket("ws://localhost:3001/hume-proxy");

        ws.onopen = function () {
          addLog("‚úÖ Connected successfully!");
        };

        ws.onmessage = function (event) {
          addLog("üì® Received: " + event.data);
        };

        ws.onerror = function (error) {
          addLog("‚ùå Error: " + error);
        };

        ws.onclose = function (event) {
          addLog(
            "üîå Disconnected. Code: " + event.code + ", Reason: " + event.reason
          );
          ws = null;
        };
      };

      document.getElementById("disconnect").onclick = function () {
        if (ws) {
          ws.close();
        }
      };
    </script>
  </body>
</html>
